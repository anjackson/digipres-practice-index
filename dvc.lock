schema: '2.0'
stages:
  fetch-ipres-metadata:
    cmd: python src/fetcher.py fetch-metadata sources/ipres/index.csv sources/ipres/metadata
    deps:
    - path: sources/ipres/index.csv
      hash: md5
      md5: 0e37d0d4644add2674131114612774e7
      size: 593
    - path: src/fetcher.py
      hash: md5
      md5: 91bd53fa20254115d1c0127221f2914e
      size: 2152
    outs:
    - path: sources/ipres/metadata
      hash: md5
      md5: 8504415ace9504a6558341b0921b4be1.dir
      size: 4137995
      nfiles: 17
  merge-ipres-metadata:
    cmd: python src/merger.py sources/ipres/metadata sources/ipres/merged
    deps:
    - path: sources/ipres/metadata
      hash: md5
      md5: 8504415ace9504a6558341b0921b4be1.dir
      size: 4137995
      nfiles: 17
    - path: src/merger.py
      hash: md5
      md5: d8c0572f374e1d7d3f23a384e53b6ec5
      size: 4479
    outs:
    - path: sources/ipres/merged.csv
      hash: md5
      md5: d99112e07275a5c4d01c7763e3045cda
      size: 1192796
    - path: sources/ipres/merged.jsonl
      hash: md5
      md5: b9966a5633305ddd60a97e0b136425be
      size: 1391901
  generate-sqlite:
    cmd:
    - sqlite-utils insert practice.db publications sources/ipres/merged.jsonl --nl
    - sqlite-utils enable-fts practice.db publications title creators abstract
    deps:
    - path: sources/ipres/merged.jsonl
      hash: md5
      md5: b9966a5633305ddd60a97e0b136425be
      size: 1391901
    outs:
    - path: practice.db
      hash: md5
      md5: 9b751f6239aa5554c4e00eec0fa4a2a8
      size: 2084864
