schema: '2.0'
stages:
  fetch-ipres-metadata:
    cmd: python src/fetcher.py fetch-metadata sources/ipres/index.csv sources/ipres/metadata
    deps:
    - path: sources/ipres/index.csv
      hash: md5
      md5: 0e37d0d4644add2674131114612774e7
      size: 593
    - path: src/fetcher.py
      hash: md5
      md5: 91bd53fa20254115d1c0127221f2914e
      size: 2152
    outs:
    - path: sources/ipres/metadata
      hash: md5
      md5: 8504415ace9504a6558341b0921b4be1.dir
      size: 4137995
      nfiles: 17
  merge-ipres-metadata:
    cmd: python src/merger.py sources/ipres/metadata sources/ipres/merged
    deps:
    - path: sources/ipres/metadata
      hash: md5
      md5: 8504415ace9504a6558341b0921b4be1.dir
      size: 4137995
      nfiles: 17
    - path: src/merger.py
      hash: md5
      md5: 1d0940c5fe7d10b40ca8fd049d266499
      size: 4408
    outs:
    - path: sources/ipres/merged.csv
      hash: md5
      md5: 5f23f7b14f5d9fbd4fc86c9d9857960a
      size: 1192944
    - path: sources/ipres/merged.jsonl
      hash: md5
      md5: 26e6b22600a3deed106b8c9ea600205c
      size: 1392049
  generate-sqlite:
    cmd:
    - sqlite-utils insert practice.db publications sources/ipres/merged.jsonl --nl
    - sqlite-utils enable-fts practice.db publications title creators abstract
    deps:
    - path: sources/ipres/merged.jsonl
      hash: md5
      md5: 26e6b22600a3deed106b8c9ea600205c
      size: 1392049
    outs:
    - path: practice.db
      hash: md5
      md5: dfb3138eda4b8991cc17a235b142b3d8
      size: 2084864
