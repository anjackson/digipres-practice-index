schema: '2.0'
stages:
  fetch-ipres-metadata:
    cmd: python src/fetcher.py fetch-metadata sources/ipres/index.csv sources/ipres/metadata
    deps:
    - path: sources/ipres/index.csv
      hash: md5
      md5: 0e37d0d4644add2674131114612774e7
      size: 593
    - path: src/fetcher.py
      hash: md5
      md5: 91bd53fa20254115d1c0127221f2914e
      size: 2152
    outs:
    - path: sources/ipres/metadata
      hash: md5
      md5: 8504415ace9504a6558341b0921b4be1.dir
      size: 4137995
      nfiles: 17
  merge-ipres-metadata:
    cmd: python src/merger.py sources/ipres/metadata sources/ipres/merged
    deps:
    - path: sources/ipres/metadata
      hash: md5
      md5: 8504415ace9504a6558341b0921b4be1.dir
      size: 4137995
      nfiles: 17
    - path: src/merger.py
      hash: md5
      md5: 2457061ece33763a179e9043eb2075f7
      size: 4421
    outs:
    - path: sources/ipres/merged.csv
      hash: md5
      md5: e78adfc9f2585e3cd20092cd2e4bbdf5
      size: 1196654
    - path: sources/ipres/merged.jsonl
      hash: md5
      md5: cd0e3c9d09dbd0a9d54cb158e412ac5a
      size: 1393895
  generate-sqlite:
    cmd:
    - sqlite-utils insert practice.db publications sources/ipres/merged.jsonl --nl
    - sqlite-utils enable-fts practice.db publications title creators abstract
    deps:
    - path: sources/ipres/merged.jsonl
      hash: md5
      md5: cd0e3c9d09dbd0a9d54cb158e412ac5a
      size: 1393895
    outs:
    - path: practice.db
      hash: md5
      md5: ba1e68008358d833cbe730e91118ad40
      size: 2088960
